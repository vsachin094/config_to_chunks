!
hostname EOS-PROD-EDGE-01
!
! =============================
! System & Management
! =============================
ip domain-name example.net
ip name-server vrf MGMT 192.168.10.1
!
clock timezone IST 5 30
!
service routing protocols model multi-agent
!
management api http-commands
 no shutdown
!
! =============================
! Users & AAA
! =============================
username admin privilege 15 secret sha512 $6$examplehashedpassword
!
aaa authorization exec default local
aaa authentication login default local
!
tacacs-server host 10.10.10.10 key 7 070C285F4D06
tacacs-server host 10.10.10.11 key 7 070C285F4D06
aaa authentication login default group tacacs+ local
aaa authorization exec default group tacacs+ local
!
! =============================
! VRFs
! =============================
vrf instance MGMT
  vrf-target import 65001:1
  vrf-target export 65001:1
!
vrf instance CUST-A
  vrf-target import 65001:100
  vrf-target export 65001:100
!
vrf instance CUST-B
  vrf-target import 65001:200
  vrf-target export 65001:200
!
! =============================
! Management Interface
! =============================
interface Management1
 description OOB Management
 vrf MGMT
 ip address 192.168.10.30/24
 no shutdown
!
ip route vrf MGMT 0.0.0.0/0 192.168.10.1
!
! =============================
! Loopbacks
! =============================
interface Loopback0
 description Router-ID
 ip address 10.255.255.3/32
!
interface Loopback100
 description Services Loopback
 ip address 10.255.255.300/32
!
! =============================
! Core / WAN Interfaces
! =============================
interface Ethernet1
 description ISP-PRIMARY
 mtu 9214
 ip address 172.16.21.2/30
 no shutdown
!
interface Ethernet2
 description ISP-BACKUP
 mtu 9214
 ip address 172.16.22.2/30
 no shutdown
!
! =============================
! Customer Access Interfaces
! =============================
interface Ethernet3
 description Customer-A-Access
 vrf CUST-A
 ip address 192.168.301.1/24
 no shutdown
!
interface Ethernet4
 description Customer-B-Access
 vrf CUST-B
 ip address 192.168.302.1/24
 no shutdown
!
! =============================
! VLAN Subinterfaces
! =============================
interface Ethernet5.100
 description VLAN100-CUST-A
 encapsulation dot1q vlan 100
 vrf CUST-A
 ip address 10.30.100.1/24
!
interface Ethernet5.200
 description VLAN200-CUST-B
 encapsulation dot1q vlan 200
 vrf CUST-B
 ip address 10.30.200.1/24
!
! =============================
! OSPF – Core IGP
! =============================
router ospf 100
 router-id 10.255.255.3
 passive-interface default
 no passive-interface Ethernet1
 no passive-interface Ethernet2
 network 10.255.255.3/32 area 0.0.0.0
 network 172.16.21.0/30 area 0.0.0.0
 network 172.16.22.0/30 area 0.0.0.0
!
! =============================
! BGP – Internet + VRFs
! =============================
router bgp 65001
 router-id 10.255.255.3
 no bgp default ipv4-unicast
!
 neighbor 172.16.21.1 remote-as 65010
 neighbor 172.16.21.1 description ISP-PRIMARY
 neighbor 172.16.22.1 remote-as 65020
 neighbor 172.16.22.1 description ISP-BACKUP
!
 address-family ipv4
  neighbor 172.16.21.1 activate
  neighbor 172.16.21.1 route-map ISP-IN in
  neighbor 172.16.21.1 route-map ISP-OUT out
  neighbor 172.16.22.1 activate
  neighbor 172.16.22.1 route-map ISP-IN in
  neighbor 172.16.22.1 route-map ISP-OUT out
  network 10.255.255.3/32
 exit-address-family
!
 vrf CUST-A
  rd 65001:100
  address-family ipv4
   neighbor 10.30.100.2 remote-as 65100
   network 192.168.301.0/24
 exit-address-family
!
 vrf CUST-B
  rd 65001:200
  address-family ipv4
   network 192.168.302.0/24
 exit-address-family
!
! =============================
! Route-Maps & Prefix-Lists
! =============================
ip prefix-list EXPORT-PREFIX seq 10 permit 10.255.255.0/24
!
route-map ISP-IN permit 10
!
route-map ISP-OUT permit 10
 match ip address prefix-list EXPORT-PREFIX
!
! =============================
! QoS
! =============================
policy-map QOS-CUST
 class class-default
  bandwidth percent 50
!
interface Ethernet3
 service-policy output QOS-CUST
!
! =============================
! NTP
! =============================
ntp server 192.168.100.10 prefer
ntp server 192.168.100.11
!
! =============================
! Syslog
! =============================
logging host 192.168.200.30
logging level all informational
!
! =============================
! SNMP
! =============================
snmp-server community PROD-RO ro
snmp-server location DC-Bangalore
snmp-server contact noc@example.net
!
! =============================
! Telemetry / Streaming (EOS-style)
! =============================
daemon TerminAttr
 exec /usr/bin/TerminAttr -cvaddr=192.168.50.10:9910 -cvauth=token,exampletoken -cvvrf=MGMT
 no shutdown
!
! =============================
! SSH Harden
